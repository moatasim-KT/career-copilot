{% extends "base.html" %}

{% block title %}Evening Summary - Career Co-Pilot{% endblock %}

{% block header_title %}üåô Evening Wrap-up{% endblock %}
{% block header_subtitle %}Great work today, {{ user_name }}! Let's reflect and plan ahead{% endblock %}

{% block content %}
<div class="greeting">
    Good evening, {{ user_name }}! üåü
</div>

<p style="margin-bottom: 25px; color: #4a5568; font-size: 16px;">
    As {{ current_date|datetime_format("%A") }} comes to a close, let's celebrate your progress and prepare for tomorrow's opportunities.
</p>

<!-- Today's Activity Summary -->
{% if daily_activity %}
<div class="section">
    <h2 class="section-title">üìã Today's Activity</h2>
    <div class="stats-grid">
        {% if daily_activity.applications_sent %}
        <div class="stat-card">
            <span class="stat-number">{{ daily_activity.applications_sent }}</span>
            <span class="stat-label">Applications Sent</span>
        </div>
        {% endif %}
        
        {% if daily_activity.jobs_viewed %}
        <div class="stat-card">
            <span class="stat-number">{{ daily_activity.jobs_viewed }}</span>
            <span class="stat-label">Jobs Viewed</span>
        </div>
        {% endif %}
        
        {% if daily_activity.profiles_updated %}
        <div class="stat-card">
            <span class="stat-number">{{ daily_activity.profiles_updated }}</span>
            <span class="stat-label">Profiles Updated</span>
        </div>
        {% endif %}
        
        {% if daily_activity.time_spent_minutes %}
        <div class="stat-card">
            <span class="stat-number">{{ daily_activity.time_spent_minutes }}m</span>
            <span class="stat-label">Time Invested</span>
        </div>
        {% endif %}
    </div>
    
    {% if daily_activity.goal_achievement %}
    <div style="background-color: #f0fff4; border: 1px solid #c6f6d5; border-radius: 6px; padding: 15px; margin-top: 15px;">
        <strong style="color: #2d3748;">üéØ Goal Achievement:</strong>
        <div class="progress-bar" style="margin: 10px 0;">
            <div class="progress-fill" style="width: {{ daily_activity.goal_achievement }}%"></div>
        </div>
        <p style="color: #4a5568; font-size: 14px;">
            You completed {{ daily_activity.goal_achievement }}% of today's goals!
        </p>
    </div>
    {% endif %}
</div>
{% endif %}

<!-- Achievements -->
{% if achievements %}
<div class="section">
    <h2 class="section-title">üèÜ Today's Achievements</h2>
    
    {% for achievement in achievements %}
    <div class="achievement-item">
        <div class="achievement-title">{{ achievement.title }}</div>
        <div class="achievement-description">{{ achievement.description }}</div>
        {% if achievement.impact %}
        <div style="margin-top: 8px; font-size: 12px; color: #718096;">
            <strong>Impact:</strong> {{ achievement.impact }}
        </div>
        {% endif %}
    </div>
    {% endfor %}
</div>
{% endif %}

<!-- Applications Sent Today -->
{% if daily_activity.applications_sent > 0 and daily_activity.applications_details %}
<div class="section">
    <h2 class="section-title">üì§ Applications Sent Today</h2>
    
    {% for application in daily_activity.applications_details %}
    <div style="background-color: #f7fafc; border: 1px solid #e2e8f0; border-radius: 6px; padding: 15px; margin-bottom: 10px;">
        <div style="display: flex; justify-content: space-between; align-items: start;">
            <div>
                <strong style="color: #2d3748; font-size: 16px;">{{ application.job_title }}</strong>
                <div style="color: #4a5568; margin-top: 2px;">{{ application.company }}</div>
                {% if application.location %}
                <div style="color: #718096; font-size: 14px; margin-top: 2px;">üìç {{ application.location }}</div>
                {% endif %}
            </div>
            <div style="text-align: right;">
                <div style="background-color: #48bb78; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px;">
                    Applied
                </div>
                <div style="color: #718096; font-size: 12px; margin-top: 4px;">
                    {{ application.applied_at|datetime_format("%I:%M %p") }}
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

<!-- Tomorrow's Plan -->
{% if tomorrow_plan %}
<div class="section">
    <h2 class="section-title">üóìÔ∏è Tomorrow's Plan</h2>
    
    {% if tomorrow_plan.priority_applications %}
    <div style="background-color: #fff5f5; border: 1px solid #fed7d7; border-radius: 6px; padding: 15px; margin-bottom: 15px;">
        <strong style="color: #2d3748;">üéØ Priority Applications:</strong>
        <ul style="margin-top: 10px; padding-left: 20px;">
            {% for job in tomorrow_plan.priority_applications %}
            <li style="color: #4a5568; margin-bottom: 5px;">
                <strong>{{ job.title }}</strong> at {{ job.company }}
                {% if job.deadline %}
                <span style="color: #e53e3e; font-size: 12px;">(Deadline: {{ job.deadline|datetime_format("%m/%d") }})</span>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
    
    {% if tomorrow_plan.follow_ups %}
    <div style="background-color: #f0f4ff; border: 1px solid #c3dafe; border-radius: 6px; padding: 15px; margin-bottom: 15px;">
        <strong style="color: #2d3748;">üìû Follow-ups Needed:</strong>
        <ul style="margin-top: 10px; padding-left: 20px;">
            {% for followup in tomorrow_plan.follow_ups %}
            <li style="color: #4a5568; margin-bottom: 5px;">
                {{ followup.company }} - {{ followup.type }}
                <span style="color: #718096; font-size: 12px;">({{ followup.days_since }} days ago)</span>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
    
    {% if tomorrow_plan.skill_development %}
    <div style="background-color: #fffaf0; border: 1px solid #fbd38d; border-radius: 6px; padding: 15px; margin-bottom: 15px;">
        <strong style="color: #2d3748;">üìö Skill Development:</strong>
        <p style="color: #4a5568; margin-top: 5px;">
            {{ tomorrow_plan.skill_development.activity }} - {{ tomorrow_plan.skill_development.skill }}
        </p>
        {% if tomorrow_plan.skill_development.resource %}
        <p style="color: #718096; font-size: 14px; margin-top: 5px;">
            Recommended: {{ tomorrow_plan.skill_development.resource }}
        </p>
        {% endif %}
    </div>
    {% endif %}
    
    {% if tomorrow_plan.networking %}
    <div style="background-color: #f0fff4; border: 1px solid #c6f6d5; border-radius: 6px; padding: 15px;">
        <strong style="color: #2d3748;">ü§ù Networking:</strong>
        <p style="color: #4a5568; margin-top: 5px;">
            {{ tomorrow_plan.networking.activity }}
        </p>
        {% if tomorrow_plan.networking.suggestions %}
        <ul style="margin-top: 8px; padding-left: 20px;">
            {% for suggestion in tomorrow_plan.networking.suggestions %}
            <li style="color: #4a5568; font-size: 14px; margin-bottom: 3px;">{{ suggestion }}</li>
            {% endfor %}
        </ul>
        {% endif %}
    </div>
    {% endif %}
</div>
{% endif %}

<!-- Motivational Message -->
{% if motivation %}
<div class="section" style="text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 8px; padding: 25px;">
    <h3 style="margin-bottom: 15px; color: white;">‚ú® A Message for You</h3>
    <p style="font-size: 16px; line-height: 1.6; color: rgba(255, 255, 255, 0.95);">
        {{ motivation }}
    </p>
</div>
{% endif %}

<!-- Weekly Progress Snapshot -->
{% if daily_activity.weekly_progress %}
<div class="section">
    <h2 class="section-title">üìä This Week's Progress</h2>
    <div class="stats-grid">
        <div class="stat-card">
            <span class="stat-number">{{ daily_activity.weekly_progress.applications }}</span>
            <span class="stat-label">Applications This Week</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">{{ daily_activity.weekly_progress.responses }}</span>
            <span class="stat-label">Responses Received</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">{{ daily_activity.weekly_progress.interviews }}</span>
            <span class="stat-label">Interviews Scheduled</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">{{ daily_activity.weekly_progress.streak_days }}</span>
            <span class="stat-label">Day Streak</span>
        </div>
    </div>
</div>
{% endif %}

<!-- Call to Action -->
<div class="section" style="text-align: center; background-color: #f7fafc; border-radius: 8px; padding: 25px;">
    <h3 style="color: #2d3748; margin-bottom: 15px;">Rest well, tomorrow brings new opportunities! üåÖ</h3>
    <p style="color: #4a5568; margin-bottom: 20px;">
        You've made progress today. Tomorrow is another chance to move closer to your career goals.
    </p>
    <a href="#tomorrow-plan" class="btn">View Tomorrow's Plan</a>
</div>

<div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e2e8f0; text-align: center;">
    <p style="color: #718096; font-size: 14px;">
        üí§ <strong>Sleep Tip:</strong> A good night's rest improves interview performance by up to 23%!
    </p>
</div>
{% endblock %}