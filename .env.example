# =============================================================================
# Career Copilot - Environment Configuration Template
# =============================================================================
# Copy this file to .env and configure for your environment.
# See LOCAL_SETUP.md for detailed instructions on obtaining API keys/credentials.
# =============================================================================

# =============================================================================
# Core Application Settings
# =============================================================================
# Environment mode: development, production, testing
ENVIRONMENT=development

# Enable debug mode (shows detailed errors, enables FastAPI docs at /docs)
DEBUG=true

# API server configuration
API_HOST=0.0.0.0
API_PORT=8002

# =============================================================================
# Database Configuration (REQUIRED)
# =============================================================================
# PostgreSQL connection URL - matches docker-compose.yml postgres service
# Format: postgresql://username:password@host:port/database_name
# Docker default: postgresql://postgres:postgres@localhost:5432/career_copilot
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/career_copilot

# Async database URL for async operations (optional, auto-derived from DATABASE_URL)
# DATABASE_URL_ASYNC=postgresql+asyncpg://postgres:postgres@localhost:5432/career_copilot

# Production database pool settings (used when ENVIRONMENT=production)
DB_MAX_CONNECTIONS=20
DB_TIMEOUT=30

# =============================================================================
# Redis Configuration (REQUIRED)
# =============================================================================
# Redis URL for caching and Celery message broker - matches docker-compose.yml redis service
REDIS_URL=redis://localhost:6379/0

# =============================================================================
# Authentication & Security (REQUIRED)
# =============================================================================
# Secret key for general encryption (generate: openssl rand -hex 32)
# MUST be changed in production! Minimum 32 characters.
SECRET_KEY=change-this-super-secret-key-in-production-min-32-chars

# JWT secret for token signing (generate: python -c "import secrets; print(secrets.token_urlsafe(32))")
# MUST be changed in production! Minimum 32 characters.
JWT_SECRET_KEY=change-this-jwt-secret-key-in-production-min-32-chars
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# Disable authentication for development (default: false in production)
DISABLE_AUTH=false

# =============================================================================
# CORS Configuration
# =============================================================================
# Comma-separated list of allowed origins for CORS
# Development default includes frontend (3000) and legacy ports
CORS_ORIGINS=http://localhost:3000,http://localhost:8501

# =============================================================================
# AI/LLM Services (AT LEAST ONE REQUIRED)
# =============================================================================
# OpenAI API Configuration
# Get key from: https://platform.openai.com/api-keys
# Pricing: https://openai.com/pricing
# Required for: Resume generation, cover letters, job recommendations, skill analysis
OPENAI_API_KEY=sk-proj-your-openai-api-key-here
OPENAI_MODEL=gpt-4
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=4000

# Groq API Configuration (Fast inference, cost-effective)
# Get key from: https://console.groq.com/keys
# Free tier: 14,400 requests/day
# Recommended for: Quick job analysis, skill extraction
GROQ_API_KEY=gsk_your-groq-api-key-here
GROQ_MODEL=llama-3.1-8b-instant
GROQ_ENABLED=true

# Anthropic Claude Configuration (Alternative to OpenAI)
# Get key from: https://console.anthropic.com/account/keys
# Required for: Advanced reasoning tasks
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here
ANTHROPIC_MODEL=claude-3-sonnet-20240229

# Google Gemini Configuration (Optional)
# Get key from: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your-gemini-api-key-here

# =============================================================================
# Vector Database (ChromaDB) - Auto-configured
# =============================================================================
# ChromaDB for job embeddings and semantic search
CHROMA_PERSIST_DIRECTORY=./data/chroma
CHROMA_COLLECTION_NAME=job_embeddings

# =============================================================================
# Job Board API Keys (OPTIONAL - for enhanced scraping)
# =============================================================================
# Adzuna Job Search API
# Get keys from: https://developer.adzuna.com/signup
# Free tier: 1,000 calls/month
ADZUNA_APP_ID=your-adzuna-app-id
ADZUNA_APP_KEY=your-adzuna-app-key

# LinkedIn API (Enterprise only - complex setup)
# Get credentials from: https://www.linkedin.com/developers/
# Note: Requires approved LinkedIn partnership
LINKEDIN_API_CLIENT_ID=your-linkedin-client-id
LINKEDIN_API_CLIENT_SECRET=your-linkedin-client-secret
LINKEDIN_ACCESS_TOKEN=your-linkedin-access-token

# Indeed Publisher API
# Get ID from: https://www.indeed.com/publisher
INDEED_PUBLISHER_ID=your-indeed-publisher-id
INDEED_API_KEY=your-indeed-api-key

# Glassdoor API
# Get credentials from: https://www.glassdoor.com/developer/index.htm
GLASSDOOR_PARTNER_ID=your-glassdoor-partner-id
GLASSDOOR_API_KEY=your-glassdoor-api-key

# RapidAPI JSearch (Alternative job search API)
# Get key from: https://rapidapi.com/letscrape-6bRBa3QguO5/api/jsearch
RAPIDAPI_KEY=your-rapidapi-key-here

# =============================================================================
# OAuth Integrations (OPTIONAL - for calendar sync)
# =============================================================================
# Google OAuth (for Google Calendar integration)
# Setup: https://console.cloud.google.com/apis/credentials
# 1. Create OAuth 2.0 Client ID
# 2. Add authorized redirect URI: http://localhost:8002/api/v1/calendar/google/callback
# 3. Enable Google Calendar API
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:8002/api/v1/calendar/google/callback

# Microsoft OAuth (for Outlook Calendar integration)
# Setup: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade
# 1. Register new application
# 2. Add redirect URI: http://localhost:8002/api/v1/calendar/microsoft/callback
# 3. Add API permissions: Calendars.ReadWrite
MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret
MICROSOFT_REDIRECT_URI=http://localhost:8002/api/v1/calendar/microsoft/callback

# GitHub OAuth (for GitHub job postings)
# Setup: https://github.com/settings/developers
# Create OAuth App with callback: http://localhost:8002/api/v1/auth/github/callback
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_API_TOKEN=your-github-personal-access-token

# =============================================================================
# Email & Notifications (OPTIONAL)
# =============================================================================
# Enable email notifications
SMTP_ENABLED=false

# Gmail SMTP Configuration (recommended for development)
# Setup: https://support.google.com/accounts/answer/185833
# 1. Enable 2FA on your Google account
# 2. Generate App Password: https://myaccount.google.com/apppasswords
# 3. Use app password (not your Gmail password)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-16-character-app-password
SMTP_FROM_EMAIL=notifications@career-copilot.com
SMTP_FROM_NAME=Career Copilot

# SendGrid API (Alternative to SMTP - easier for production)
# Get key from: https://app.sendgrid.com/settings/api_keys
# Free tier: 100 emails/day
SENDGRID_API_KEY=SG.your-sendgrid-api-key-here

# Email scheduling
DAILY_DIGEST_TIME=08:00
WEEKLY_SUMMARY_DAY=MONDAY
WEEKLY_SUMMARY_TIME=09:00
EMAIL_TEMPLATES_DIR=backend/app/templates/email

# Slack Notifications (Optional)
# Setup: https://api.slack.com/messaging/webhooks
# 1. Create Slack App
# 2. Activate Incoming Webhooks
# 3. Add webhook to workspace
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token
SLACK_CHANNEL=#job-alerts

# =============================================================================
# Monitoring & Error Tracking (OPTIONAL - recommended for production)
# =============================================================================
# Sentry Error Tracking
# Get DSN from: https://sentry.io/settings/projects/
# Free tier: 5,000 events/month
SENTRY_DSN=https://your-key@o123456.ingest.sentry.io/123456
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# Job Processing Configuration
# =============================================================================
# Maximum jobs to fetch per scraping session
MAX_JOBS_PER_FETCH=100

# How often to refresh job listings (hours)
JOB_REFRESH_INTERVAL_HOURS=24

# How long to keep old job postings (days)
JOB_RETENTION_DAYS=30

# =============================================================================
# Scraping Configuration
# =============================================================================
# Enable/disable automatic job scraping
ENABLE_JOB_SCRAPING=true

# Scraper settings (from docker-compose or defaults)
SCRAPING_MAX_RESULTS_PER_SITE=50
SCRAPING_MAX_CONCURRENT=3
SCRAPING_RATE_LIMIT_MIN=2
SCRAPING_RATE_LIMIT_MAX=5

# Individual scraper toggles (true/false)
SCRAPING_ENABLE_INDEED=true
SCRAPING_ENABLE_LINKEDIN=false
SCRAPING_ENABLE_ARBEITNOW=true
SCRAPING_ENABLE_BERLINSTARTUPJOBS=true
SCRAPING_ENABLE_RELOCATEME=true
SCRAPING_ENABLE_EURES=true
SCRAPING_ENABLE_LANDINGJOBS=true
SCRAPING_ENABLE_EUTECHJOBS=true
SCRAPING_ENABLE_EUROTECHJOBS=true
SCRAPING_ENABLE_AIJOBSNET=true
SCRAPING_ENABLE_DATACAREER=true
SCRAPING_ENABLE_FIRECRAWL=false
SCRAPING_ENABLE_EU_PLAYWRIGHT=false

# =============================================================================
# Feature Flags & Automation
# =============================================================================
# Enable APScheduler background task scheduler
ENABLE_SCHEDULER=true

# Enable caching for recommendations and analytics
ENABLE_CACHING=true

# Enable analytics tracking
ENABLE_ANALYTICS=true

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_ENABLED=true
MAX_REQUESTS_PER_MINUTE=60

# =============================================================================
# File Storage
# =============================================================================
# Frontend URL for CORS and redirects
FRONTEND_URL=http://localhost:3000

# Local file upload directory
UPLOAD_DIR=./data/uploads
MAX_FILE_SIZE_MB=10

# =============================================================================
# Backup Configuration
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=./data/backups

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FILE_PATH=./logs/app.log

# =============================================================================
# Development Tools (development only)
# =============================================================================
# Enable FastAPI interactive docs at /docs and /redoc
ENABLE_DOCS=true

# Enable hot reload for development
RELOAD=true

# =============================================================================
# Job Processing Configuration
# =============================================================================
MAX_JOBS_PER_FETCH=100
JOB_REFRESH_INTERVAL_HOURS=24
JOB_RETENTION_DAYS=30

# =============================================================================
# Email & Notifications Configuration
# =============================================================================
# Enable/disable email notifications
SMTP_ENABLED=false

# SMTP server configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_app_password
SMTP_FROM_EMAIL=notifications@career-copilot.com
SMTP_FROM_NAME=Career Copilot

# Notification scheduling
DAILY_DIGEST_TIME=08:00
WEEKLY_SUMMARY_DAY=MONDAY
WEEKLY_SUMMARY_TIME=09:00
JOB_ALERT_FREQUENCY=daily
URGENT_NOTIFICATION_DELAY_MINUTES=15

# Email templates directory
EMAIL_TEMPLATES_DIR=backend/app/templates/email

# SendGrid API Key (alternative to SMTP configuration)
SENDGRID_API_KEY=your_sendgrid_api_key

# =============================================================================
# Backup System Configuration
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=./data/backups

# =============================================================================
# Optional External Services
# =============================================================================
# Google OAuth Configuration
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# GitHub OAuth Configuration
GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret

# Indeed API Configuration
INDEED_PUBLISHER_ID=your_indeed_publisher_id
INDEED_API_KEY=your_indeed_api_key

# Glassdoor API Configuration
GLASSDOOR_PARTNER_ID=your_glassdoor_partner_id
GLASSDOOR_API_KEY=your_glassdoor_api_key

# =============================================================================
# Feature Flags & Automation
# =============================================================================
# Enable/disable the APScheduler background task scheduler
ENABLE_SCHEDULER=true

# Enable/disable automatic job scraping from external APIs
ENABLE_JOB_SCRAPING=false

# Enable caching for recommendations and analytics
ENABLE_CACHING=true

# Enable analytics tracking
ENABLE_ANALYTICS=true

# =============================================================================
# File Storage Configuration
# =============================================================================
FRONTEND_URL=http://localhost:8501
UPLOAD_DIR=./data/uploads
MAX_FILE_SIZE_MB=10

# =============================================================================
# Additional Configuration
# =============================================================================
# Job API key for external scraping services
JOB_API_KEY=your_job_api_key